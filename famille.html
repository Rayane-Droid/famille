
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Vente de Biens</title>
  <style>
    .language-menu {
      margin: 15px 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    .language-menu label {
      font-weight: 600;
      margin-right: 10px;
      font-size: 1.1em;
      color: #34495e;
    }
    .language-menu select {
      padding: 8px 12px;
      border-radius: 6px;
      border: 1.8px solid #2980b9;
      background-color: #f0f8ff;
      font-size: 1em;
      color: #2c3e50;
      cursor: pointer;
      transition: border-color 0.3s ease, box-shadow 0.3s ease;
    }
    .language-menu select:hover,
    .language-menu select:focus {
      border-color: #3498db;
      box-shadow: 0 0 8px rgba(52, 152, 219, 0.6);
      outline: none;
    }
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 20px;
      background: #f4f4f9;
      color: #333;
    }
    h2 {
      color: #444;
    }
    .hidden {
      display: none;
    }
    .btn {
      padding: 8px 16px;
      background-color: #4caf50;
      color: white;
      border: none;
      cursor: pointer;
      border-radius: 5px;
      margin-right: 5px;
      font-weight: 600;
      transition: background-color 0.3s ease;
    }
    .btn:hover {
      background-color: #45a049;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
      background: white;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      border-radius: 8px;
      overflow: hidden;
    }
    th, td {
      border: 1px solid #ccc;
      padding: 12px 10px;
      text-align: center;
      font-size: 0.95em;
    }
    th {
      background-color: #2980b9;
      color: #fff;
      font-weight: 700;
      text-transform: uppercase;
    }
    .input-block {
      margin-bottom: 20px;
    }
    .input-block label {
      font-weight: 600;
      display: block;
      margin-bottom: 6px;
      font-size: 1.1em;
      color: #34495e;
    }
    .input-block input {
      padding: 8px 10px;
      width: 100%;
      max-width: 350px;
      border-radius: 6px;
      border: 1.5px solid #2980b9;
      font-size: 1em;
      transition: border-color 0.3s ease;
    }
    .input-block input:focus {
      border-color: #3498db;
      outline: none;
      box-shadow: 0 0 6px rgba(52, 152, 219, 0.6);
    }
  </style>
</head>
<body>
  <div id="language-selection">
    <h2 id="language-prompt">
      ðŸ‡²ðŸ‡¦ Ø§Ø®ØªØ± Ù„ØºØªÙƒ :<br />
      ðŸ‡«ðŸ‡· Choisissez votre langue :<br />
      ðŸ‡ºðŸ‡¸ Choose your language:<br />
      ðŸ‡ªðŸ‡¸ Elija su idioma:<br />
      ðŸ‡©ðŸ‡ª WÃ¤hlen Sie Ihre Sprache:<br />
      ðŸ‡®ðŸ‡¹ Scegli la tua lingua:
    </h2>
    <div class="language-menu">
      <select id="language" onchange="selectLanguage()">
        <option value="">--</option>
        <option value="fr">FranÃ§ais</option>
        <option value="ar">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
        <option value="en">Anglais</option>
        <option value="es">Espagnol</option>
        <option value="de">Allemand</option>
        <option value="it">Italien</option>
      </select>
    </div>
  </div>

  <div id="user-form" class="hidden" aria-live="polite" aria-label="Formulaire utilisateur">
    <h2 id="welcome-message">Bienvenue !</h2>
    <div class="input-block">
      <label id="label-username" for="username">Nom d'utilisateur :</label>
      <input type="text" id="username" aria-required="true" />
    </div>
    <div class="input-block">
      <label id="label-phone" for="phone">NumÃ©ro de tÃ©lÃ©phone :</label>
      <input type="text" id="phone" aria-required="true" />
    </div>
    <button class="btn" id="btn-continue" onclick="submitUserInfo()">Continuer</button>
  </div>

  <div id="content" class="hidden" aria-live="polite" aria-label="Liste des biens disponibles">
    <button class="btn" onclick="resetApp()" id="btn-back">Retour au menu des langues</button>
    <h2 id="property-title">Nos biens disponibles :</h2>
    <table id="property-table" role="table" aria-describedby="property-title">
      <thead>
        <tr>
          <th scope="col">NÂ°</th>
          <th scope="col">Bien</th>
          <th scope="col">Titre</th>
          <th scope="col">Description</th>
          <th scope="col">Superficie</th>
          <th scope="col">Prix</th>
          <th scope="col">Photo</th>
          <th scope="col">VidÃ©o</th>
          <th scope="col">Valider</th>
          <th scope="col">Proposition</th>
          <th scope="col">Annuler</th>
        </tr>
      </thead>
      <tbody id="property-body"></tbody>
    </table>
    <br />
    <button class="btn" onclick="saveToPDF()" id="btn-save">Enregistrer en PDF</button>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
  <script>
    const properties = [
      {
        key: "villa",
        photo: "https://exemple.com/villa-photo.jpg",
        video: "https://exemple.com/villa-video.mp4",
        titles: {
          fr: "Belle Villa moderne",
          en: "Beautiful Modern Villa",
          ar: "ÙÙŠÙ„Ø§ Ø¬Ù…ÙŠÙ„Ø© ÙˆØ­Ø¯ÙŠØ«Ø©",
          es: "Hermosa villa moderna",
          de: "SchÃ¶ne moderne Villa",
          it: "Bella villa moderna"
        },
        descriptions: {
          fr: "Grande villa avec piscine et jardin.",
          en: "Large villa with pool and garden.",
          ar: "ÙÙŠÙ„Ø§ ÙƒØ¨ÙŠØ±Ø© Ù…Ø¹ Ù…Ø³Ø¨Ø­ ÙˆØ­Ø¯ÙŠÙ‚Ø©.",
          es: "Amplia villa con piscina y jardÃ­n.",
          de: "GroÃŸe Villa mit Pool und Garten.",
          it: "Grande villa con piscina e giardino."
        },
        areas: {
          fr: "350 mÂ²",
          en: "350 sqm",
          ar: "Ù£Ù¥Ù  Ù…ØªØ± Ù…Ø±Ø¨Ø¹",
          es: "350 mÂ²",
          de: "350 mÂ²",
          it: "350 mÂ²"
        },
        prices: {
          fr: "3 000 000 DH",
          en: "3,000,000 DH",
          ar: "Ù£Ù¬Ù Ù Ù Ù¬Ù Ù Ù  Ø¯Ø±Ù‡Ù…",
          es: "3.000.000 DH",
          de: "3.000.000 DH",
          it: "3.000.000 DH"
        }
      },
      {
        key: "garage",
        photo: "https://exemple.com/garage-photo.jpg",
        video: "https://exemple.com/garage-video.mp4",
        titles: {
          fr: "Garage sÃ©curisÃ©",
          en: "Secure Garage",
          ar: "ÙƒØ±Ø§Ø¬ Ø¢Ù…Ù†",
          es: "Garaje seguro",
          de: "Sichere Garage",
          it: "Garage sicuro"
        },
        descriptions: {
          fr: "Garage spacieux avec systÃ¨me de sÃ©curitÃ©.",
          en: "Spacious garage with security system.",
          ar: "ÙƒØ±Ø§Ø¬ ÙˆØ§Ø³Ø¹ Ù…Ø¹ Ù†Ø¸Ø§Ù… Ø£Ù…Ù†ÙŠ.",
          es: "Garaje espacioso con sistema de seguridad.",
          de: "GerÃ¤umige Garage mit Sicherheitssystem.",
          it: "Garage spazioso con sistema di sicurezza."
        },
        areas: {
          fr: "50 mÂ²",
          en: "50 sqm",
          ar: "Ù¥Ù  Ù…ØªØ± Ù…Ø±Ø¨Ø¹",
          es: "50 mÂ²",
          de: "50 mÂ²",
          it: "50 mÂ²"
        },
        prices: {
          fr: "500 000 DH",
          en: "500,000 DH",
          ar: "Ù¥Ù Ù Ù¬Ù Ù Ù  Ø¯Ø±Ù‡Ù…",
          es: "500.000 DH",
          de: "500.000 DH",
          it: "500.000 DH"
        }
      },
      {
        key: "terrain1",
        photo: "https://exemple.com/terrain1-photo.jpg",
        video: "https://exemple.com/terrain1-video.mp4",
        titles: {
          fr: "Terrain agricole fertile",
          en: "Fertile Agricultural Land",
          ar: "Ø£Ø±Ø¶ Ø²Ø±Ø§Ø¹ÙŠØ© Ø®ØµØ¨Ø©",
          es: "Terreno agrÃ­cola fÃ©rtil",
          de: "Fruchtbares Ackerland",
          it: "Terreno agricolo fertile"
        },
        descriptions: {
          fr: "Terrain idÃ©al pour la culture, bien irriguÃ©.",
          en: "Ideal land for farming, well irrigated.",
          ar: "Ø£Ø±Ø¶ Ù…Ø«Ø§Ù„ÙŠØ© Ù„Ù„Ø²Ø±Ø§Ø¹Ø©ØŒ Ù…Ø²ÙˆØ¯Ø© Ø¨Ø§Ù„Ø±ÙŠ Ø§Ù„Ø¬ÙŠØ¯.",
          es: "Terreno ideal para cultivo, bien irrigado.",
          de: "Ideal fÃ¼r Landwirtschaft, gut bewÃ¤ssert.",
          it: "Terreno ideale per l'agricoltura, ben irrigato."
        },
        areas: {
          fr: "1000 mÂ²",
          en: "1000 sqm",
          ar: "Ù¡Ù Ù Ù  Ù…ØªØ± Ù…Ø±Ø¨Ø¹",
          es: "1000 mÂ²",
          de: "1000 mÂ²",
          it: "1000 mÂ²"
        },
        prices: {
          fr: "800 000 DH",
          en: "800,000 DH",
          ar: "Ù¨Ù Ù Ù¬Ù Ù Ù  Ø¯Ø±Ù‡Ù…",
          es: "800.000 DH",
          de: "800.000 DH",
          it: "800.000 DH"
        }
      },
      {
        key: "terrain2",
        photo: "https://exemple.com/terrain2-photo.jpg",
        video: "https://exemple.com/terrain2-video.mp4",
        titles: {
          fr: "Terrain constructible",
          en: "Buildable Land",
          ar: "Ø£Ø±Ø¶ Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„Ø¨Ù†Ø§Ø¡",
          es: "Terreno urbanizable",
          de: "Bebaubarer Land",
          it: "Terreno edificabile"
        },
        descriptions: {
          fr: "Terrain plat prÃªt pour construction rÃ©sidentielle.",
          en: "Flat land ready for residential building.",
          ar: "Ø£Ø±Ø¶ Ù…Ø³ØªÙˆÙŠØ© Ø¬Ø§Ù‡Ø²Ø© Ù„Ù„Ø¨Ù†Ø§Ø¡ Ø§Ù„Ø³ÙƒÙ†ÙŠ.",
          es: "Terreno plano listo para construcciÃ³n residencial.",
          de: "Flaches Land bereit fÃ¼r Wohnbebauung.",
          it: "Terreno pianeggiante pronto per costruzione residenziale."
        },
        areas: {
          fr: "750 mÂ²",
          en: "750 sqm",
          ar: "Ù§Ù¥Ù  Ù…ØªØ± Ù…Ø±Ø¨Ø¹",
          es: "750 mÂ²",
          de: "750 mÂ²",
          it: "750 mÂ²"
        },
        prices: {
          fr: "1 200 000 DH",
          en: "1,200,000 DH",
          ar: "Ù¡Ù¬Ù¢Ù Ù Ù¬Ù Ù Ù  Ø¯Ø±Ù‡Ù…",
          es: "1.200.000 DH",
          de: "1.200.000 DH",
          it: "1.200.000 DH"
        }
      },
      {
        key: "terrain3",
        photo: "https://exemple.com/terrain3-photo.jpg",
        video: "https://exemple.com/terrain3-video.mp4",
        titles: {
          fr: "Terrain commercial",
          en: "Commercial Land",
          ar: "Ø£Ø±Ø¶ ØªØ¬Ø§Ø±ÙŠØ©",
          es: "Terreno comercial",
          de: "GewerbegrundstÃ¼ck",
          it: "Terreno commerciale"
        },
        descriptions: {
          fr: "Terrain situÃ© en zone commerciale dynamique.",
          en: "Land located in a dynamic commercial area.",
          ar: "Ø£Ø±Ø¶ ØªÙ‚Ø¹ ÙÙŠ Ù…Ù†Ø·Ù‚Ø© ØªØ¬Ø§Ø±ÙŠØ© Ù†Ø´Ø·Ø©.",
          es: "Terreno ubicado en una zona comercial dinÃ¡mica.",
          de: "GrundstÃ¼ck in dynamischem Gewerbegebiet gelegen.",
          it: "Terreno situato in una zona commerciale dinamica."
        },
        areas: {
          fr: "500 mÂ²",
          en: "500 sqm",
          ar: "Ù¥Ù Ù  Ù…ØªØ± Ù…Ø±Ø¨Ø¹",
          es: "500 mÂ²",
          de: "500 mÂ²",
          it: "500 mÂ²"
        },
        prices: {
          fr: "2 000 000 DH",
          en: "2,000,000 DH",
          ar: "Ù¢Ù¬Ù Ù Ù Ù¬Ù Ù Ù  Ø¯Ø±Ù‡Ù…",
          es: "2.000.000 DH",
          de: "2.000.000 DH",
          it: "2.000.000 DH"
        }
      }
    ];

    let currentLanguage = "fr";

    const translations = {
      fr: {
        selectLanguage: "Choisissez votre langue :",
        welcome: "Bienvenue !",
        username: "Nom d'utilisateur :",
        phone: "NumÃ©ro de tÃ©lÃ©phone :",
        continue: "Continuer",
        back: "Retour au menu des langues",
        propertyTitle: "Nos biens disponibles :",
        save: "Enregistrer en PDF",
        tableHeaders: ["NÂ°", "Bien", "Titre", "Description", "Superficie", "Prix", "Photo", "VidÃ©o", "Valider", "Proposition", "Annuler"],
        validate: "Valider",
        propose: "Proposer",
        cancel: "Annuler",
        noDesire: "Bien non dÃ©sirÃ©",
        fillAll: "Veuillez remplir tous les champs.",
        invalidPhone: "NumÃ©ro de tÃ©lÃ©phone invalide.",
        invalidPrice: "Prix invalide.",
        actionRequired: "Veuillez sÃ©lectionner une action pour chaque bien.",
        pdfSaved: "PDF enregistrÃ© sous le nom :",
        purchaseProcedureTitle: "ProcÃ©dure d'achat :",
        purchaseProcedure:
          "1. VÃ©rifiez les biens et les choix dans le tableau.\n" +
          "2. Contactez notre service commercial au numÃ©ro indiquÃ©.\n" +
          "3. Un conseiller vous accompagnera pour finaliser la transaction.\n" +
          "4. Vous recevrez une confirmation par email avec les dÃ©tails.\n" +
          "Merci de votre confiance.",
        summaryTitle: "RÃ©sumÃ© des choix",
        nameLabel: "Nom :",
        phoneLabel: "TÃ©lÃ©phone :",
        dateLabel: "Date de saisie :",
        photoText: "Photo",
        videoText: "VidÃ©o"
      },
      en: {
        selectLanguage: "Choose your language:",
        welcome: "Welcome!",
        username: "Username:",
        phone: "Phone number:",
        continue: "Continue",
        back: "Back to language menu",
        propertyTitle: "Available properties:",
        save: "Save as PDF",
        tableHeaders: ["No.", "Property", "Title", "Description", "Area", "Price", "Photo", "Video", "Validate", "Proposal", "Cancel"],
        validate: "Validate",
        propose: "Propose",
        cancel: "Cancel",
        noDesire: "Not interested",
        fillAll: "Please fill all fields.",
        invalidPhone: "Invalid phone number.",
        invalidPrice: "Invalid price.",
        actionRequired: "Please select an action for each property.",
        pdfSaved: "PDF saved as:",
        purchaseProcedureTitle: "Purchase procedure:",
        purchaseProcedure:
          "1. Check the properties and selections in the table.\n" +
          "2. Contact our sales department at the indicated number.\n" +
          "3. A consultant will assist you in finalizing the transaction.\n" +
          "4. You will receive a confirmation email with details.\n" +
          "Thank you for your trust.",
        summaryTitle: "Summary of selections",
        nameLabel: "Name:",
        phoneLabel: "Phone:",
        dateLabel: "Entry date:",
        photoText: "Photo",
        videoText: "Video"
      },
      ar: {
        selectLanguage: "Ø§Ø®ØªØ± Ù„ØºØªÙƒ:",
        welcome: "Ù…Ø±Ø­Ø¨Ø§!",
        username: "Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:",
        phone: "Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ:",
        continue: "Ø§Ø³ØªÙ…Ø±Ø§Ø±",
        back: "Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù„ØºØ§Øª",
        propertyTitle: "Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø©:",
        save: "Ø­ÙØ¸ ÙƒÙ…Ù„Ù PDF",
        tableHeaders: ["Ø±Ù‚Ù…", "Ø§Ù„Ø¹Ù‚Ø§Ø±", "Ø§Ù„Ø¹Ù†ÙˆØ§Ù†", "Ø§Ù„ÙˆØµÙ", "Ø§Ù„Ù…Ø³Ø§Ø­Ø©", "Ø§Ù„Ø³Ø¹Ø±", "ØµÙˆØ±Ø©", "ÙÙŠØ¯ÙŠÙˆ", "ØªØ£ÙƒÙŠØ¯", "Ø§Ù‚ØªØ±Ø§Ø­", "Ø¥Ù„ØºØ§Ø¡"],
        validate: "ØªØ£ÙƒÙŠØ¯",
        propose: "Ø§Ù‚ØªØ±Ø§Ø­",
        cancel: "Ø¥Ù„ØºØ§Ø¡",
        noDesire: "ØºÙŠØ± Ù…Ù‡ØªÙ…",
        fillAll: "ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„.",
        invalidPhone: "Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ ØºÙŠØ± ØµØ§Ù„Ø­.",
        invalidPrice: "Ø³Ø¹Ø± ØºÙŠØ± ØµØ§Ù„Ø­.",
        actionRequired: "ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø¥Ø¬Ø±Ø§Ø¡ Ù„ÙƒÙ„ Ø¹Ù‚Ø§Ø±.",
        pdfSaved: "ØªÙ… Ø­ÙØ¸ Ù…Ù„Ù PDF Ø¨Ø§Ø³Ù…:",
        purchaseProcedureTitle: "Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ø´Ø±Ø§Ø¡:",
        purchaseProcedure:
          "1. ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª ÙˆØ§Ù„Ø§Ø®ØªÙŠØ§Ø±Ø§Øª ÙÙŠ Ø§Ù„Ø¬Ø¯ÙˆÙ„.\n" +
          "2. Ø§ØªØµÙ„ Ø¨Ù‚Ø³Ù… Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª Ù„Ø¯ÙŠÙ†Ø§ Ø¹Ù„Ù‰ Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ù…Ø°ÙƒÙˆØ±.\n" +
          "3. Ø³ÙŠÙ‚ÙˆÙ… Ø§Ù„Ù…Ø³ØªØ´Ø§Ø± Ø¨Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ Ù„Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©.\n" +
          "4. Ø³ØªØªÙ„Ù‚Ù‰ Ø±Ø³Ø§Ù„Ø© ØªØ£ÙƒÙŠØ¯ Ø¹Ø¨Ø± Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù…Ø¹ Ø§Ù„ØªÙØ§ØµÙŠÙ„.\n" +
          "Ø´ÙƒØ±Ø§Ù‹ Ù„Ø«Ù‚ØªÙƒ.",
        summaryTitle: "Ù…Ù„Ø®Øµ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±Ø§Øª",
        nameLabel: "Ø§Ù„Ø§Ø³Ù…:",
        phoneLabel: "Ø§Ù„Ù‡Ø§ØªÙ:",
        dateLabel: "ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„:",
        photoText: "ØµÙˆØ±Ø©",
        videoText: "ÙÙŠØ¯ÙŠÙˆ"
      },
      es: {
        selectLanguage: "Elija su idioma:",
        welcome: "Â¡Bienvenido!",
        username: "Nombre de usuario:",
        phone: "NÃºmero de telÃ©fono:",
        continue: "Continuar",
        back: "Volver al menÃº de idiomas",
        propertyTitle: "Propiedades disponibles:",
        save: "Guardar como PDF",
        tableHeaders: ["NÂ°", "Propiedad", "TÃ­tulo", "DescripciÃ³n", "Superficie", "Precio", "Foto", "VÃ­deo", "Validar", "Propuesta", "Cancelar"],
        validate: "Validar",
        propose: "Proponer",
        cancel: "Cancelar",
        noDesire: "No interesado",
        fillAll: "Por favor, complete todos los campos.",
        invalidPhone: "NÃºmero de telÃ©fono invÃ¡lido.",
        invalidPrice: "Precio invÃ¡lido.",
        actionRequired: "Por favor, seleccione una acciÃ³n para cada propiedad.",
        pdfSaved: "PDF guardado como:",
        purchaseProcedureTitle: "Procedimiento de compra:",
        purchaseProcedure:
          "1. Verifique las propiedades y selecciones en la tabla.\n" +
          "2. Contacte a nuestro departamento de ventas al nÃºmero indicado.\n" +
          "3. Un asesor le ayudarÃ¡ a finalizar la transacciÃ³n.\n" +
          "4. RecibirÃ¡ un correo electrÃ³nico de confirmaciÃ³n con los detalles.\n" +
          "Gracias por su confianza.",
        summaryTitle: "Resumen de selecciones",
        nameLabel: "Nombre:",
        phoneLabel: "TelÃ©fono:",
        dateLabel: "Fecha de ingreso:",
        photoText: "Foto",
        videoText: "VÃ­deo"
      },
      de: {
        selectLanguage: "WÃ¤hlen Sie Ihre Sprache:",
        welcome: "Willkommen!",
        username: "Benutzername:",
        phone: "Telefonnummer:",
        continue: "Weiter",
        back: "ZurÃ¼ck zum SprachmenÃ¼",
        propertyTitle: "VerfÃ¼gbare Immobilien:",
        save: "Als PDF speichern",
        tableHeaders: ["Nr.", "Immobilie", "Titel", "Beschreibung", "FlÃ¤che", "Preis", "Foto", "Video", "BestÃ¤tigen", "Vorschlag", "Stornieren"],
        validate: "BestÃ¤tigen",
        propose: "Vorschlagen",
        cancel: "Stornieren",
        noDesire: "Nicht interessiert",
        fillAll: "Bitte alle Felder ausfÃ¼llen.",
        invalidPhone: "UngÃ¼ltige Telefonnummer.",
        invalidPrice: "UngÃ¼ltiger Preis.",
        actionRequired: "Bitte wÃ¤hlen Sie eine Aktion fÃ¼r jede Immobilie aus.",
        pdfSaved: "PDF gespeichert als:",
        purchaseProcedureTitle: "Kaufverfahren:",
        purchaseProcedure:
          "1. ÃœberprÃ¼fen Sie die Immobilien und Auswahlen in der Tabelle.\n" +
          "2. Kontaktieren Sie unsere Verkaufsabteilung unter der angegebenen Nummer.\n" +
          "3. Ein Berater unterstÃ¼tzt Sie bei der Finalisierung der Transaktion.\n" +
          "4. Sie erhalten eine BestÃ¤tigungs-E-Mail mit Details.\n" +
          "Vielen Dank fÃ¼r Ihr Vertrauen.",
        summaryTitle: "Zusammenfassung der Auswahl",
        nameLabel: "Name:",
        phoneLabel: "Telefon:",
        dateLabel: "Eingabedatum:",
        photoText: "Foto",
        videoText: "Video"
      },
      it: {
        selectLanguage: "Scegli la tua lingua:",
        welcome: "Benvenuto!",
        username: "Nome utente:",
        phone: "Numero di telefono:",
        continue: "Continua",
        back: "Torna al menu lingue",
        propertyTitle: "Immobili disponibili:",
        save: "Salva come PDF",
        tableHeaders: ["NÂ°", "Immobile", "Titolo", "Descrizione", "Superficie", "Prezzo", "Foto", "Video", "Conferma", "Proposta", "Annulla"],
        validate: "Conferma",
        propose: "Proponi",
        cancel: "Annulla",
        noDesire: "Non interessato",
        fillAll: "Per favore compila tutti i campi.",
        invalidPhone: "Numero di telefono non valido.",
        invalidPrice: "Prezzo non valido.",
        actionRequired: "Seleziona un'azione per ogni immobile.",
        pdfSaved: "PDF salvato come:",
        purchaseProcedureTitle: "Procedura di acquisto:",
        purchaseProcedure:
          "1. Controlla le proprietÃ  e le scelte nella tabella.\n" +
          "2. Contatta il nostro servizio commerciale al numero indicato.\n" +
          "3. Un consulente ti accompagnerÃ  per finalizzare la transazione.\n" +
          "4. Riceverai una conferma via email con i dettagli.\n" +
          "Grazie per la tua fiducia.",
        summaryTitle: "Riepilogo delle scelte",
        nameLabel: "Nome:",
        phoneLabel: "Telefono:",
        dateLabel: "Data di inserimento:",
        photoText: "Foto",
        videoText: "Video"
      }
    };

    function selectLanguage() {
      const lang = document.getElementById("language").value;
      if (!lang) return;
      currentLanguage = lang;
      const t = translations[lang];

      // Met Ã  jour les Ã©lÃ©ments visibles et textes
      document.getElementById("language-selection").classList.add("hidden");
      document.getElementById("user-form").classList.remove("hidden");
      document.getElementById("welcome-message").innerText = t.welcome;
      document.getElementById("label-username").innerText = t.username;
      document.getElementById("label-phone").innerText = t.phone;
      document.getElementById("btn-continue").innerText = t.continue;
      document.getElementById("btn-back").innerText = t.back;
      document.getElementById("property-title").innerText = t.propertyTitle;
      document.getElementById("btn-save").innerText = t.save;

      // Met Ã  jour les en-tÃªtes du tableau
      const tableHeaders = document.querySelectorAll("#property-table th");
      t.tableHeaders.forEach((header, index) => {
        tableHeaders[index].innerText = header;
      });
    }

    function submitUserInfo() {
      const t = translations[currentLanguage];
      const username = document.getElementById("username").value.trim();
      const phone = document.getElementById("phone").value.trim();

      if (!username || !phone) {
        alert(t.fillAll);
        return;
      }
      const phoneRegex = /^\+?\d{8,15}$/;
      if (!phoneRegex.test(phone)) {
        alert(t.invalidPhone);
        return;
      }
      document.getElementById("user-form").classList.add("hidden");
      document.getElementById("content").classList.remove("hidden");
      generatePropertyTable();
    }

    function resetApp() {
      currentLanguage = "fr";
      document.getElementById("language-selection").classList.remove("hidden");
      document.getElementById("user-form").classList.add("hidden");
      document.getElementById("content").classList.add("hidden");
      document.getElementById("language").value = "";
      document.getElementById("username").value = "";
      document.getElementById("phone").value = "";
      document.getElementById("property-body").innerHTML = "";
    }

    function generatePropertyTable() {
      const t = translations[currentLanguage];
      const tbody = document.getElementById("property-body");
      tbody.innerHTML = "";
      properties.forEach((property, index) => {
        const row = document.createElement("tr");
        row.setAttribute("data-checked", "false");

        const title = property.titles[currentLanguage] || property.titles.fr;
        const description = property.descriptions[currentLanguage] || property.descriptions.fr;
        const area = property.areas[currentLanguage] || property.areas.fr;
        const price = property.prices[currentLanguage] || property.prices.fr;

        row.innerHTML = `
          <td>${index + 1}</td>
          <td>${title}</td>
          <td>${title}</td>
          <td>${description}</td>
          <td>${area}</td>
          <td>${price}</td>
          <td><a href="${property.photo}" target="_blank" rel="noopener">${t.photoText}</a></td>
          <td><a href="${property.video}" target="_blank" rel="noopener">${t.videoText}</a></td>
          <td class="validate-cell"></td>
          <td class="proposal-cell"></td>
          <td class="cancel-cell"></td>
        `;

        const validateBtn = document.createElement("button");
        validateBtn.innerText = t.validate;
        validateBtn.className = "btn";
        validateBtn.onclick = () => {
          row.querySelector(".validate-cell").innerText = row.cells[5].innerText;
          row.querySelector(".proposal-cell").innerHTML = "";
          row.querySelector(".cancel-cell").innerHTML = "";
          row.setAttribute("data-checked", "true");
        };

        const proposeBtn = document.createElement("button");
        proposeBtn.innerText = t.propose;
        proposeBtn.className = "btn";
        proposeBtn.onclick = () => {
          const input = document.createElement("input");
          input.type = "number";
          input.placeholder = t.propose + " un prix";
          input.style.width = "120px";

          const sendBtn = document.createElement("button");
          sendBtn.innerText = t.continue;
          sendBtn.className = "btn";
          sendBtn.onclick = () => {
            const value = input.value;
            if (!value || isNaN(value)) {
              alert(t.invalidPrice);
              return;
            }
            row.querySelector(".proposal-cell").innerText = value + " DH";
            row.querySelector(".validate-cell").innerHTML = "";
            row.querySelector(".cancel-cell").innerHTML = "";
            row.setAttribute("data-checked", "true");
          };

          const proposalCell = row.querySelector(".proposal-cell");
          proposalCell.innerHTML = "";
          proposalCell.appendChild(input);
          proposalCell.appendChild(sendBtn);
          row.querySelector(".validate-cell").innerHTML = "";
          row.querySelector(".cancel-cell").innerHTML = "";
        };

        const cancelBtn = document.createElement("button");
        cancelBtn.innerText = t.cancel;
        cancelBtn.className = "btn";
        cancelBtn.onclick = () => {
          row.querySelector(".cancel-cell").innerText = t.noDesire;
          row.querySelector(".validate-cell").innerHTML = "";
          row.querySelector(".proposal-cell").innerHTML = "";
          row.setAttribute("data-checked", "true");
        };

        row.querySelector(".validate-cell").appendChild(validateBtn);
        row.querySelector(".proposal-cell").appendChild(proposeBtn);
        row.querySelector(".cancel-cell").appendChild(cancelBtn);

        tbody.appendChild(row);
      });
    }

    function saveToPDF() {
      const t = translations[currentLanguage];
      const rows = document.querySelectorAll("#property-body tr");
      for (let row of rows) {
        if (row.getAttribute("data-checked") !== "true") {
          alert(t.actionRequired);
          return;
        }
      }

      const nomUtilisateur = document.getElementById("username").value || t.nameLabel + " " + "Non renseignÃ©";
      const telephoneUtilisateur = document.getElementById("phone").value || t.phoneLabel + " " + "Non renseignÃ©";

      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();

      // Date actuelle formatÃ©e pour affichage selon langue
      const date = new Date();
      const localeForDate = currentLanguage === "ar" ? "ar-EG" : currentLanguage + '-' + currentLanguage.toUpperCase();
      const dateStr = date.toLocaleDateString(localeForDate, {
        year: "numeric",
        month: "long",
        day: "numeric"
      });

      // Date/heure pour nom fichier format YYYYMMDD_HHMMSS
      const pad = (n) => n.toString().padStart(2, "0");
      const filenameDate = `${date.getFullYear()}${pad(date.getMonth() + 1)}${pad(date.getDate())}_${pad(date.getHours())}${pad(date.getMinutes())}${pad(date.getSeconds())}`;
      const filename = `Offre_${filenameDate}.pdf`;

      // Titre
      doc.setFontSize(18);
      doc.setFont("helvetica", "bold");
      doc.text(t.summaryTitle, 105, 15, null, null, "center");

      // Infos utilisateur et date
      doc.setFontSize(11);
      doc.setFont("helvetica", "normal");
      doc.text(`${t.dateLabel} ${dateStr}`, 14, 30);
      doc.text(`${t.nameLabel} ${nomUtilisateur}`, 14, 38);
      doc.text(`${t.phoneLabel} ${telephoneUtilisateur}`, 14, 46);

      // PrÃ©parer les donnÃ©es du tableau
      const bodyData = [];
      rows.forEach((row) => {
        const cells = row.querySelectorAll("td");
        const bien = cells[1].innerText.trim();
        const prix = cells[5].innerText.trim();

        // Choix (valider, proposer, annuler)
        let choix = "";
        if (cells[8].innerText.trim()) choix = cells[8].innerText.trim();
        else if (cells[9].innerText.trim()) choix = cells[9].innerText.trim();
        else if (cells[10].innerText.trim()) choix = cells[10].innerText.trim();

        bodyData.push([bien, prix, choix]);
      });

      // GÃ©nÃ©rer le tableau avec autoTable
      doc.autoTable({
        startY: 55,
        head: [[t.tableHeaders[1], t.tableHeaders[5], "Choix"]],
        body: bodyData,
        styles: { font: "helvetica", fontSize: 10, cellPadding: 3 },
        headStyles: { fillColor: [41, 128, 185], textColor: 255, fontStyle: "bold" },
        alternateRowStyles: { fillColor: [240, 240, 240] },
        margin: { left: 14, right: 14 },
        columnStyles: {
          0: { cellWidth: 70 },
          1: { cellWidth: 40 },
          2: { cellWidth: 50 },
        },
      });

      const lastY = doc.lastAutoTable ? doc.lastAutoTable.finalY + 10 : 100;

      // Texte procÃ©dure d'achat traduit
      const splitText = doc.splitTextToSize(t.purchaseProcedure, 180);

      doc.setFontSize(11);
      doc.setFont("helvetica", "italic");
      doc.text(t.purchaseProcedureTitle, 14, lastY - 8);
      doc.text(splitText, 14, lastY + 5);

      doc.save(filename);

      alert(`${t.pdfSaved} ${filename}`);
      resetApp();
    }

    window.addEventListener("load", () => {
      document.getElementById("language-selection").classList.remove("hidden");
    });
  </script>

  <script>
    // Configuration Firebase (depuis ton projet)
    const firebaseConfig = {
      apiKey: "AIzaSyBw7Jl0JfEIrwEO-XeJdBBRLc...",
      authDomain: "botbd-d13b0.firebaseapp.com",
      databaseURL: "https://botbd-d13b0-default-rtdb.firebaseio.com",
      projectId: "botbd-d13b0",
      storageBucket: "botbd-d13b0.appspot.com",
      messagingSenderId: "313161565166",
      appId: "1:313161565166:web:a7a5a4e050f5afbcd8c4ff"
    };

    // Initialisation Firebase
    const app = firebase.initializeApp(firebaseConfig);
    const database = firebase.database();

    // Fonction pour envoyer la question
    function sendToFirebase() {
      const question = document.getElementById("userInput").value;
      if (question.trim() === "") {
        alert("Veuillez entrer une question.");
        return;
      }

      // Envoie dans la Realtime Database
      database.ref("questions").push({
        question: question,
        timestamp: Date.now()
      });

      alert("Question envoyÃ©e !");
      document.getElementById("userInput").value = "";
    }
  </script>
  
</body>
</html>
